# EVO-Task

## Task 1
В этом задании была имплементирована функция обработки шаблонов типа(словарь).
Функция принимает на вход шаблоны типа  ```Some text: {some_dict[key1][key2]...}```
Вторым аргументов функции выступает словарь,который нужно оптимизировать.(то есть оставить только те данные,которые есть в шаблоне)
### Реализация
Функция реализована в фалйе ```main.py```, и имеет название ```optimize_data```
Как она работает:
1. Создаёт словарь ```new_dict```, куда будет сохранять все необходимые данные
2. Функция парсит все непустые шаблоны
3. Для каждого шаблона:
    - Функция создаёт новый словарь ```single_template_new_data = {}```, в который записываются только те данные из входящего словаря,которые есть в этом шаблоне
    - Формирует строковой запрос для входящего словаря ```data```.Запрос имеет вид ```data[some_dict][key1][key2]...``` 
    - Получает и сохраняет данные из ```data``` с помощью функции ```query_result = eval(query)```
    - Формирует строковой запрос для ```single_template_new_data```,который сохранит в нём ```query_result```
    - Запрос будет такого вида: ```single_template_new_data = `{some_dict:{key1:{key2:{ ... {last_key:query_result}...}}}```
    - Выполняет запрос с помощью команды ```exec()```
    - Добавляет данные из ```single_template_new_data``` в ```new_data``` с помощью функции ```merge_dict()```
3. Возвращает ```new_dict```

## Task 2
В этом задании было написано небольшое веб-приложения.
Со стороны клиента можно загрузить файл на сервер.
Сервер же считает SHA256 от этого файла (от его строкового представления в кодировке 'utf 8'), и возвращает ___посчитаный хеш,а также количество загрузок файла с данной хеш-суммой___ клиенту.
### Что использовалось:
* Python 3
* Flask
* flask_sqlalchemy
* hashlib
### Что было реализовано:
- [x] Модель данных для входящего файла
- [x] Хранение данных в ```sqllite```
- [x] Форма для загрузки данных
- [x] Поддержка таких форматов файлов для загрузки: ```'txt', 'pdf', 'doc', 'docx', 'jpg'```
- [x] Ajax функция для загрузки данных на сервер, и добавления результата (полученой хэш-суммы) запроса на страницу
- [x] Ajax функция для получения количества загрузок данного файла
- [x] Расчёт SHA256 хэш-суммы на стороне сервера, подсчёт загруженных файлов с данной хеш-суммой
- [x] Расчёт CRC-16 хэш-суммы на стороне клиента
- [ ] Тесты
### Некоторые детали:
В базе данных я храню только SHA256 сумму от данного файла. По ней же и производиться поиск,когда мы считаем количество загрузок данного файла.

Из-за этого возможен (но очень маловероятен) вариант,когда у двух разных файлов будут одинаковые хеш-суммы. Тогда вывод количества загрузок для этих файлов может быть не корректен,так в базе они будут храниться в одной записи.
### Ограничения
Сознательно была введена подежка только таких форматов ```'txt', 'pdf', 'doc', 'docx', 'jpg'```, для избежания проблем с обработкой неизвестных форматов

